{% extends "../../../../layouts/layout-dfe-schoolnav-noback.html" %}

{% set pageName="Home" %}



{% block content %}

{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

{% set html %}
  <h1 class="govuk-notification-banner__heading">
    Checks completed
  </h1>
  <p class="govuk-body">Now download the checked file to see which parents can claim free school meals for their children.</p>

  <p id="file-name-display">Filename will be displayed here.</p>


  {%- from "govuk/components/button/macro.njk" import govukButton -%}

  <div class="moj-button-action">
    <a id="download-button" class="govuk-button" href="/public/csv/free-school-meals-outcomes-YYYYMMDD.csv" download role="button">
      Download
    </a>
  </div>





  <script type="text/javascript">
    // Function to generate the filename based on today's date
    function generateFilename() {
      const today = new Date();
      const year = today.getFullYear();
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const day = String(today.getDate()).padStart(2, '0');
      return `free-school-meals-outcomes-${year}${month}${day}.csv`;
    }

    // Update the filename display on page load
    document.addEventListener('DOMContentLoaded', function () {
      const filename = generateFilename();
      document.getElementById('file-name-display').innerText = filename; // Display the filename
      document.getElementById('download-button').setAttribute('download', filename);
    });


  </script>









{% endset %}

{{ govukNotificationBanner({
  html: html,
  type: "success"
}) }}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-m">Result explainer </h1>
    <p><strong>Entitled</strong> – The children of this parent or guardian are entitled to free school meals.</p>
    <p><strong>May not be entitled</strong> – The children of this parent or guardian may not be entitled to free school meals. To appeal, provide evidence to support your local authority in making a decision. View the list of acceptable evidence. </p>
    <p><strong>Could not check</strong>  – This parent or guardian’s personal information doesn’t match the departmental records. Either their data was entered incorrectly or their entitlement isn’t currently updated on the system.</p>
    <p><strong>Error</strong> – There was a problem accessing this parent or guardian’s data to obtain a result. </p>


<p><a href="../../dashboard">Return to dashboard</a></p>


{% endblock %}

{% block pageScripts %}
<script type="text/javascript" src="/public/javascripts/moj/all.js"></script>

{% endblock %}