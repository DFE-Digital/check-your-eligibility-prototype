{% extends "layouts/layout-dfe.html" %}

{% set pageName="Home" %}

{% block content %}

<!-- Success Notification Banner -->
<div class="govuk-notification-banner govuk-notification-banner--success"
     role="alert"
     aria-labelledby="govuk-notification-banner-title"
     data-module="govuk-notification-banner"
     style="display: none;" id="success-banner">
  <div class="govuk-notification-banner__header">
    <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
      Success
    </h2>
  </div>
  <div class="govuk-notification-banner__content">
    <p class="govuk-notification-banner__heading">
      You’ve set your cookie preferences. <a class="govuk-notification-banner__link" href="#">Go back to the page you were looking at</a>.
    </p>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    <h1 class="govuk-heading-l govuk-!-margin-bottom-4">Cookies</h1>

    <p>Cookies are small files saved on your phone, tablet or computer when you visit a website.</p>
    <p>We use cookies to make the Check a family's eligibility service work and collect information about how you use it.</p>

    <h2 class="govuk-heading-m govuk-!-margin-top-6">Essential cookies</h2>

    <p class="govuk-body">These essential cookies:</p>
    <ul class="govuk-list govuk-list--bullet">
      <li>keep your information secure while you use Check a family's eligibility</li>
      <li>help us understand how you use the website, so we can make improvements</li>
      <li>temporarily store the selections you make</li>
      <li>remember what notifications you've seen, so you're not shown them more than once</li>
    </ul>
    <p>We do not need to ask permission to use them.</p>

    <table class="govuk-table">
        <thead class="govuk-table__head">
        <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Name</th>
            <th scope="col" class="govuk-table__header">Purpose</th>
            <th scope="col" class="govuk-table__header">Expires</th>
        </tr>
        </thead>
        <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">.AspNetCore.Antiforgery</td>
                <td class="govuk-table__cell">Prevents forgery by ensuring details are entered by an actual person</td>
                <td class="govuk-table__cell">At the end of your browser session</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">AspNetCore.Mvc.CookieTempDataProvider</td>
                <td class="govuk-table__cell">Stores temporary data so we can display the right messages and screens when you move through the service</td>
                <td class="govuk-table__cell">At the end of your browser session</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">.AspNetCore.Session</td>
                <td class="govuk-table__cell">Keeps your data secure and stable as you move through the service</td>
                <td class="govuk-table__cell">At the end of your browser session</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">sa-login</td>
                <td class="govuk-table__cell">Keeps your session secure after you you've logged in</td>
                <td class="govuk-table__cell">At the end of your browser session</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">sa-loginC1</td>
                <td class="govuk-table__cell">Stores additional data to keep your session secure after you you've logged in</td>
                <td class="govuk-table__cell">At the end of your browser session</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">sa-loginC2</td>
                <td class="govuk-table__cell">Stores additional data to keep your session secure after you you've logged in</td>
                <td class="govuk-table__cell">At the end of your browser session</td>
            </tr>
        </tbody>
    </table>

    <h2 class="govuk-heading-m govuk-!-margin-top-6">Analytics cookies (optional)</h2>
    <p>With your permission, we use Google Analytics and Microsft Clarity to collect data about how you use and interact with the Check a family's eligibility service. This information helps us to improve our service.</p>
    <p>Google is not allowed to use or share our analytics data with anyone.</p>
    <p>Google Analytics stores anonymised information about:</p>
    <ul class="govuk-list govuk-list--bullet">
        <li>how you got to Check a family's eligibility</li>
        <li>the pages you visit on Check a family's eligibility and how long you spend on them</li>
        <li>any errors you see while using Check a family's eligibility</li>
    </ul>

    <table class="govuk-table" aria-label="Cookies that measure website usage">
        <thead class="govuk-table__head">
        <tr>
            <th scope="col" class="govuk-table__header">
                Name
            </th>
            <th scope="col" class="govuk-table__header">
                Purpose
            </th>
            <th scope="col" class="govuk-table__header">
                Expires
            </th>
        </tr>
        </thead>
        <tbody class="govuk-table__body">
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">_ga</td>
                <td class="govuk-table__cell">Helps Google Analytics count how many people visit this site by tracking if you’ve visited before</td>
                <td class="govuk-table__cell">2 years</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">CLID</td>
                <td class="govuk-table__cell">Starts the tracking process for Microsoft Clarity so we can collect analytics data as you move through the service</td>
                <td class="govuk-table__cell">1 year</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">MUID</td>
                <td class="govuk-table__cell">Microsoft User ID. Allows Microsoft to collect analytics accross their services</td>
                <td class="govuk-table__cell">1 year</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">_clck</td>
                <td class="govuk-table__cell">Clarity User ID. Allows Microsoft Clarity to collect unique analytics across the service</td>
                <td class="govuk-table__cell">1 year</td>
            </tr>
            <tr class="govuk-table__row">
                <td class="govuk-table__cell">_clsk</td>
                <td class="govuk-table__cell">Helps Microsoft Clarity track your navigation through the service during your browser session</td>
                <td class="govuk-table__cell">Daily or at the end of your session</td>
            </tr>
        </tbody>
    </table>

    <h2 class="govuk-heading-l">Change your cookie settings</h2>
    <form id="cookie-settings-form">
      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
            Do you want to accept analytics cookies?
          </legend>
          <div class="govuk-radios" data-module="govuk-radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="cookies-analytics" name="cookies[analytics]" type="radio" value="yes">
              <label class="govuk-label govuk-radios__label" for="cookies-analytics">Yes</label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="cookies-analytics-2" name="cookies[analytics]" type="radio" value="no" checked>
              <label class="govuk-label govuk-radios__label" for="cookies-analytics-2">No</label>
            </div>
          </div>
        </fieldset>
      </div>
      <button type="submit" class="govuk-button" data-module="govuk-button">Save cookie settings</button>
    </form>
  </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
      const form = document.getElementById("cookie-settings-form");
      const successBanner = document.getElementById("success-banner");

      form.addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent the default form submission

        // Ensure a selection has been made
        const selectedOption = document.querySelector('input[name="cookies[analytics]"]:checked');
        if (!selectedOption) {
          return;
        }


        // Show the success banner
        successBanner.style.display = "block";

        // Scroll to the top of the page
        window.scrollTo({ top: 0});

        // Clear the form after submission
        form.reset();
      });
    });
  </script>

{% endblock %}